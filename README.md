# API Документация

### Базовый URL

`https://1cplatform.mitcoms.ru/Dev/U_MediaFinance_for_testing/hs/samba`

## Точки доступа (Endpoints)

### 1. Конечные рекламодатели

### 1.1 **Cписок конечных рекламодателей.**

**Метод:** `GET`

**URL:** `/finaladv`

**Параметры запроса:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `inn`              | `string`  |         | ИНН конечного рекламодателя              |
| `kpp`              | `string`  |        | КПП конечного рекламодателя              |
| `name`              | `string` (%like%)  |   | Наименование конечного рекламодателя              |
| `uuid`              | `string`  |       | Уникальный идентификатор конечного рекламодателя              |

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "seccess",
    "result": [
        {
            "uuid": "301ca510-80b8-11ef-816c-0050568a4702",
            "name": "Карат Рус Медиа ООО FOR TEST",
            "fullName": "Карат Рус Медиа ООО FOR TEST",
            "inn": "7717707438",
            "kpp": "771701002"
        },
        {
            "uuid": "9e188360-56d2-11ed-b75a-005056995bef",
            "name": "Карат Рус Медиа ООО",
            "fullName": "Карат Рус Медиа ООО",
            "inn": "7717707438",
            "kpp": "771701001"
        }
    ]
}
```

### 1.2 **Создать конечного рекламодателя.**

**Метод:** `POST`

**URL:** `/finaladv`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `inn`              | `string`  | *        | ИНН конечного рекламодателя              |
| `kpp`              | `string`  |          | КПП конечного рекламодателя              |
| `name`             | `string`  | *        | Наименование конечного рекламодателя    |
| `fullName`         | `string`  |          | Полное наименование конечного рекламодателя |

**Пример запроса:**

```json
{
    "inn": "7717707438",
    "kpp": "771701001",
    "name": "Карат Рус Медиа ООО",
    "fullName": "ООО \"Карат Рус Медиа\""
}
```

**Пример ответа:**

```json
{
    "status": "error",
    "message": "Конечный рекламодатель с таким ИНН уже существует: Карат Рус Медиа ООО",
    "result": {
        "name": "Карат Рус Медиа ООО",
        "uuid": "9e188360-56d2-11ed-b75a-005056995bef"
    }
}
```

### 1.3 **Обновить конечного рекламодателя.**

**Метод:** `PUT`

**URL:** `/finaladv`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `uuid`              | `string`  |        | Уникальный идентификатор конечного рекламодателя              |
| `inn`              | `string`  |         | ИНН конечного рекламодателя              |
| `kpp`              | `string`  |          | КПП конечного рекламодателя              |
| `name`             | `string`  |            | Наименование конечного рекламодателя     |
| `fullName`         | `string`  |          | Полное наименование конечного рекламодателя |

**Пример запроса:**

```json
{
    "inn": "7717707438",
    "kpp": "771701001",
    "name": "Карат Рус Медиа ООО",
    "fullName": "ООО \"Карат Рус Медиа\""
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "Конечный рекламодатель обновлен.",
    "result": {
        "uuid": "8a378302-80c0-11ef-816c-0050568a4702",
        "inn": "7717707438",
        "kpp": "771701003",
        "name": "Карат Рус Медиа ООО FOR TEST"
    }
}
```

## 2. Конечные договоры рекламодателей

### 2.1 **Список конечных договоров рекламодателей**

**Метод:** `GET`

**URL:** `/finalcontracts`

**Параметры запроса:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `uuid`              | `string`  |         | Уникальный идентификатор конечного договора              |
| `number`              | `string`  |        | Номер конечного договора              |
| `date`              | `string`  |             | Дата конечного договора              |
| `inn_finaladv`     | `string`  |   *(or)       | ИНН конечного рекламодателя              |
| `kpp_finaladv`    | `string`  |             | КПП конечного рекламодателя              |
| `uuid_finaladv`     | `string`  |  *(or)      | Уникальный идентификатор конечного рекламодателя              |

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "seccess",
    "result": [
        {
            "uuid": "cd2539af-80f1-11ef-816c-0050568a4702",
            "number": "1-Test",
            "date": "2022-07-21T00:00:00",
            "inn_finaladv": "7717707438",
            "kpp_finaladv": "771701004",
            "name_finaladv": "Карат Рус Медиа ООО FOR TEST 22",
            "uuid_finaladv": "301ca510-80b8-11ef-816c-0050568a4702",
            "inn_contractor": "7726472670",
            "kpp_contractor": "772601001",
            "name_contractor": "1001101 ООО ( до 31.01.2023 АЙТАРГЕТ ТЕХНОЛОГИИ)",
            "uuid_contractor": "9b955c16-80ef-11ef-816c-0050568a4702"
        }
    ]
}
```

### 2.2 **Создать договор конечного рекламодателя.**

**Метод:** `POST`

**URL:** `/finalcontracts`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `number`              | `string`  | *        | Номер конечного договора рекламодателя  |
| `date`                | `string`  | *        | Дата конечного договора рекламодателя  |
| `inn_finaladv`        | `string`  |  *(or)    | ИНН конечного рекламодателя  |
| `kpp_finaladv`        | `string`  |           | КПП конечного рекламодателя  |
| `uuid_finaladv`       | `string`  |  *(or)    | Уникальный идентификатор конечного рекламодателя  |
| `inn_contractor`        | `string`  |  **(or)    | ИНН юр. лица  |
| `kpp_contractor`        | `string`  |           | КПП юр. лица  |
| `uuid_contractor`       | `string`  |  **(or)    | Уникальный идентификатор юр. лица  |

**Пример запроса:**

```json
{
    "number": "1-Test",
    "date": "20220721",
    "inn_finaladv": "7717707438",
    "kpp_finaladv": "771701004",
    "inn_contractor":"7726472670"
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "Конечный договор рекламодателя успешно создан",
    "result": {
        "uuid": "569d3eee-80f2-11ef-816c-0050568a4702",
        "number": "2-Test",
        "date": "2022-07-21T00:00:00"
    }
}
```

### 2.3 **Обновить договор конечного рекламодателя.**

**Метод:** `PUT`

**URL:** `/finalcontracts`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `uuid`              | `string`  | * (or)          | Уникальный номер конечного договора рекламодателя  |
| `number`              | `string`  | ** (or)      | Номер конечного договора рекламодателя  |
| `date`                | `string`  | ** (or)       | Дата конечного договора рекламодателя  |
| `inn_finaladv`        | `string`  |  **(or)       | ИНН конечного рекламодателя  |
| `kpp_finaladv`        | `string`  |               | КПП конечного рекламодателя  |
| `uuid_finaladv`       | `string`  |  **(or)       | Уникальный идентификатор конечного рекламодателя  |
| `inn_contractor`        | `string`  |             | ИНН юр. лица  |
| `kpp_contractor`        | `string`  |           | КПП юр. лица  |
| `uuid_contractor`       | `string`  |          | Уникальный идентификатор юр. лица  |

**Пример запроса:**

```json
{
    "uuid": "cd2539af-80f1-11ef-816c-0050568a4702",
    "number": "44-Test",
    "date": "20220721",
    "uuid_finaladv": "06c71ae6-80c2-11ef-816c-0050568a4702",
    "inn_contractor":"2309115177"
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "Конечный договор рекламодателя обновлен",
    "result": {
        "uuid": "cd2539af-80f1-11ef-816c-0050568a4702",
        "number": "44-Test",
        "date": "2022-07-21T00:00:00"
    }
}
```

---

### 3. Юридические лица (Customers)

### 3.1 **Cписок юр. лиц**

**Метод:** `GET`

**URL:** `/customers`

**Параметры запроса:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `inn`              | `string`  |        | ИНН юр. лица              |
| `kpp`              | `string`  |        | КПП юр. лица              |
| `name`              | `string` (%like%)  |        | Наименование юр. лица              |
| `uuid`              | `string`  |        | Уникальный идентификатор юр. лица              |

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "seccess",
    "result": [
        {
            "uuid": "d241d1cf-dbc0-46f7-80c5-0a043c390827",
            "name": "АЛД Автомотив ООО ",
            "fullName": "ООО “АЛД Автомотив”",
            "inn": "7725514969",
            "kpp": "772501001"
        }
    ]
}
```

---

### 4. Бренды (Brands)

### 4.1 **Cписок брендов**

**Метод:** `GET`

**URL:** `/brands`

**Параметры запроса:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `uuid`              | `string`  |          | Уникальный идентификатор бренда          |
| `name`              | `string`  |          | Наименование бренда                      |
| `inn`              | `string`  |          | ИНН юр. лица бренда                       |
| `kpp`              | `string`  |          | КПП юр. лица бренда                       |
| `uuid_contractor`  | `string`  |          | Уникальный идентификатор юр. лица бренда         |

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "seccess",
    "result": [
        {
            "uuid": "1dff21fa-6a02-11ef-816a-005056b27e80",
            "name": "SAMBA (ЛТ)",
            "name_contractor": "ТРАДИЦИЯ ООО",
            "inn_contractor": "7810751880",
            "kpp_contractor": "781001001",
            "uuid_contractor": "a787dc66-52fb-11ef-8168-005056b27e80"
        },
        {
            "uuid": "04e19a7f-52ff-11ef-8168-005056b27e80",
            "name": "Русские традиции ",
            "name_contractor": "ТРАДИЦИЯ ООО",
            "inn_contractor": "7810751880",
            "kpp_contractor": "781001001",
            "uuid_contractor": "a787dc66-52fb-11ef-8168-005056b27e80"
        }
    ]
}
```

### 4.2 **Создать бренд**

**Метод:** `POST`

**URL:** `/brands`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `name`              | `string`  | *       | Наименование бренда                         |
| `inn_contractor`   | `string`  | * (or)      | ИНН юр.лица бренда                         |
| `kpp_contractor`   | `string`  |          | КПП юр.лица бренда                         |
| `uuid_contractor`  | `string`  | * (or)      | Уникальный идентификатор юр. лица бренда   |

**Пример запроса:**

```json
{
    "name": "My brand NIKE",
    "inn_contractor": "3526019521"
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "Бренд успешно создан.",
    "result": {
        "uuid": "da7d0cd6-6fb8-4bd2-b93b-096be4e1c11f",
        "name": "My brand NIKE"
    }
}
```

### 4.3 **Обновить бренд**

**Метод:** `PUT`

**URL:** `/brands`

**Параметры JSON:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `name`              | `string`  | *       | Наименование бренда                         |
| `uuid`               | `string`  | *     | Уникальный идентификатор бренда                         |

**Пример запроса:**

```json
{
    "name": "NIKE NIKE",
    "uuid": "da7d0cd6-6fb8-4bd2-b93b-096be4e1c11f"
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "Бренд обновлен",
    "result": {
        "uuid": "da7d0cd6-6fb8-4bd2-b93b-096be4e1c11f",
        "name": "NIKE NIKE"
    }
}
```

---

### 4. Рекламные кампании (RK)

### 4.1 **Cписок рекламных кампаний**

**Метод:** `GET`

**URL:** `/rk`

**Параметры запроса:**

| Parameter          | Type      | Required | Description                               |
|--------------------|-----------|----------|-------------------------------------------|
| `uuid`              | `string`  |          | Уникальный идентификатор РК          |
| `name`              | `string`  | (%like%)      | Наименование РК                      |
| `rk_id`              | `string`  |          | Идентификатор РК в SAMBA                    |
| `numberMF`              | `string`  |          | Внутренний номер РК в 1С                    |
| `inn_contractor`  | `string`  |          | ИНН юр. лица РК         |
| `kpp_contractor`  | `string`  |          | КПП юр. лица РК         |
| `uuid_contractor`  | `string`  |          | Уникальный идентификатор юр. лица РК         |

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "seccess",
    "result": [
        {
            "uuid": "88e245e6-0b83-11ef-8168-005056b27e80",
            "name": "SAMBA (May - 2024)",
            "rk_id": "SAMBA|Продуктовая сеть Светофор/Черкашина|May - 2024",
            "numberMF": "У081566",
            "name_contractor": "Черкашина Дарья Андреевна ИП",
            "inn_contractor": "381508339299",
            "kpp_contractor": "",
            "uuid_contractor": "3f8935e4-095b-11ef-8168-005056b27e80"
        },
        {
            "uuid": "3e7124b0-0164-465d-b9e2-b0e2858b0db7",
            "name": "SAMBA|Продуктовая сеть Светофор/Черкашина|May – 2024",
            "rk_id": "SAMBA|Продуктовая сеть Светофор/Черкашина|May – 2024",
            "numberMF": "У081722",
            "name_contractor": "Черкашина Дарья Андреевна ИП",
            "inn_contractor": "381508339299",
            "kpp_contractor": "",
            "uuid_contractor": "3f8935e4-095b-11ef-8168-005056b27e80"
        }
    ]
}
```

**Назначение:** Создание рекламной кампании.

**Метод:** `POST`

**URL:** `/rk`

**Параметры JSON:**

- `RK_ID` (string)*: Номер рекламной кампании.
- `AdvName` (string)*: Наименование рекламодателя.
- `AdvINN` (string)*: ИНН рекламодателя.
- `AdvKPP` (string)*: КПП рекламодателя.
- `BegDate` (string)*: Дата начала РК (формат: `dd.mm.yyyy`).
- `EndDate` (string)*: Дата окончания РК (формат: `dd.mm.yyyy`).
- `LastAdvName` (string): Наименование конечного рекламодателя.
- `LastAdvINN` (string): ИНН конечного рекламодателя.
- `LastAdvKPP` (string): КПП конечного рекламодателя.
- `LastAdvAgrNumber` (string): Номер договора конечного рекламодателя.
- `LastAdvAgrDate` (string): Дата договора конечного рекламодателя.

**Пример запроса:**

```json
{
    "RK_ID": "12345",
    "AdvName": "Sample Advertiser",
    "AdvINN": "7701234567",
    "AdvKPP": "770101001",
    "BegDate": "01.01.2024",
    "EndDate": "31.12.2024",
    "LastAdvName": "ООО Конечный Рекламодатель",
    "LastAdvINN": "7707654321",
    "LastAdvKPP": "770701001",
    "LastAdvAgrNumber": "Д-12345",
    "LastAdvAgrDate": "01.01.2024"
}
```

**Пример ответа:**

```json
{
    "status": "ok",
    "message": "",
    "result": null
}
```

---

### 5. PO

**Назначение:** Получить данные о PO (заказах).

**Метод:** `GET`

**URL:** `/po`

**Параметры JSON:** Нет.

**Пример ответа:**

```json
{
    "status": "ok",
    "message": null,
    "result": [
        {
            "uuid": "7399e00d-37e7-4eef-b87a-d16b7d421155",
            "number": "УЛУ080366/01",
            "date": "2024-03-07T14:37:55",
            "amount": 348183.61,
            "uuid_rk": "c10d0693-291d-4542-b1c8-293458b6fa98",
            "rk_id": "SAMBA|Nabiullin|Mar - 2024",
            "numberMF": "У081095"
        }
    ]
}
```
